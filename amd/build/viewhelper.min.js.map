{"version":3,"file":"viewhelper.min.js","sources":["../src/viewhelper.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * JavaScript to manage on view page.\r\n *\r\n * @package\r\n * @copyright 2017 The Open University\r\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\n/**\r\n * @module mod_openstudio/viewhelper\r\n */\r\n\r\ndefine(['jquery', 'js/isotope.pkgd.min.js'], function($, Isotope) {\r\n    var t;\r\n\r\n    t = {\r\n\r\n        /**\r\n         * Isotope instance.\r\n         * There are more than a grid in a page\r\n         */\r\n        isotope: [],\r\n\r\n        /**\r\n         * Module config. Passed from server side.\r\n         * {\r\n         *     searchtext: string\r\n         * }\r\n         */\r\n        mconfig: null,\r\n\r\n        /**\r\n         * List out all of css selector used in this module.\r\n         */\r\n        CSS: {\r\n            SEARCHBOX: '#oustudyplan-query'\r\n        },\r\n\r\n        /**\r\n         * Element selectors.\r\n         */\r\n        SELECTOR: {\r\n            FILTER_CONTAINER: '#filter_container',\r\n            FILTER_FORM: '#openstudio-filter-form',\r\n            SELECT_FROM: '#openstudio-filter-select-from',\r\n            AREA_ALL: '#filter_block_0',\r\n            AREA_ACTIVITIES_ID: '#filter_block_2',\r\n            AREA_INPUT: '#openstudio-filter-select-from .openstudio-filter-area-input',\r\n            BLOCK_ITEM: '#openstudio-filter-select-from .openstudio-filter-block',\r\n            ACTIVITY_ITEM: '#openstudio-filter-select-from .openstudio-filter-block-activity',\r\n            FILTER_SORT_BY: '.openstudio_filter_sort_by',\r\n            FILTER_QUICK_SELECT: '.openstudio_filter_quick_select',\r\n            FILTER_LINK: '.openstudio-filter-link a',\r\n        },\r\n\r\n        /**\r\n         * Default config.\r\n         */\r\n        CONFIG: {\r\n            searchtext: '',\r\n            hasselectfrom: false,\r\n            hasfilterform: false,\r\n        },\r\n\r\n        /**\r\n         * Initialise this module.\r\n         *\r\n         * @param {JSON} options  The settings for this feature.\r\n         */\r\n        init: function(options) {\r\n            t.mconfig = options || t.CONFIG;\r\n\r\n            t.handleFilter();\r\n            t.handleIsotope();\r\n            t.handleGroupSwitcher();\r\n            t.handleViewSizeSwitcher();\r\n            t.handleBlockSwitcher();\r\n            t.initSearchForm();\r\n            t.handleCollapseClick();\r\n\r\n            if (t.mconfig.hasOwnProperty('hasselectfrom') && t.mconfig.hasselectfrom === true) {\r\n                t.handleSelectFrom(t.SELECTOR.SELECT_FROM);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handle items will be shown via Isotope masonry template.\r\n         *\r\n         * @method handleTooltip\r\n         */\r\n        handleIsotope: function() {\r\n            var container = $('.openstudio-grid');\r\n            container.each(function() {\r\n                t.isotope.push(new Isotope('#' + this.id, {\r\n                    layoutMode: 'masonry',\r\n                    itemSelector: '.openstudio-grid-item',\r\n                    masonry: {\r\n                        columnWidth: 243,\r\n                        gutter: 20,\r\n                        horizontalOrder: true\r\n                    }\r\n                }));\r\n            });\r\n\r\n            // Once all images loaded, try to re-arrange all items.\r\n            $(window).on('load', function() {\r\n                t.reArrangeItems();\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Re-arrange items\r\n         *\r\n         * @method reArrangeItems\r\n         */\r\n        reArrangeItems: function() {\r\n            setTimeout(function() {\r\n                $.each(t.isotope, function(i, grid) {\r\n                    grid.layout();\r\n                });\r\n            }, 1000);\r\n        },\r\n\r\n        /**\r\n         * Handle when user filter by group.\r\n         *\r\n         * @method handleGroupSwitcher\r\n         */\r\n        handleGroupSwitcher: function() {\r\n            // This should work for mobile also.\r\n            $(document).on('change', '#filter_groupid', function() {\r\n                t.redirectURL();\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Handle when user filter by block.\r\n         *\r\n         * @method handleBlockSwitcher\r\n         */\r\n        handleBlockSwitcher: function() {\r\n\r\n            $(t.SELECTOR.AREA_INPUT).on('click', function() {\r\n                $(t.SELECTOR.AREA_INPUT).not(this).prop('checked', false);\r\n            });\r\n\r\n            $(t.SELECTOR.AREA_INPUT).on('change', function() {\r\n                var value = $(this).val();\r\n                var checked = $(this).is(':checked');\r\n                var areaActivityValue = $('#filter_area_activity_value').val();\r\n                var checkBlocks = false;\r\n\r\n                if (checked) {\r\n                    // If we check on activity, then all blocks and activities should be checked all.\r\n                    if (parseInt(value) === parseInt(areaActivityValue)) {\r\n                        checkBlocks = true;\r\n                    }\r\n                } else {\r\n                    value = 0;\r\n                    $(t.SELECTOR.AREA_ALL).prop('checked', true);\r\n                }\r\n\r\n                $(t.SELECTOR.BLOCK_ITEM).prop('checked', checkBlocks);\r\n                $(t.SELECTOR.ACTIVITY_ITEM).prop('checked', checkBlocks);\r\n\r\n                t.updateFilterBlock(value);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Update to the old filter block hidden input + change placeholder.\r\n         *\r\n         * @param {Integer} value\r\n         */\r\n        updateFilterBlock: function(value) {\r\n            // Apply to old filter_block.\r\n            $('#filter_block').val(value);\r\n\r\n            // Change the placeholder.\r\n            $(t.SELECTOR.SELECT_FROM + '-placeholder').html($('#filter_block option:selected').text());\r\n        },\r\n\r\n        /**\r\n         * Handle when user filter by view number.\r\n         *\r\n         * @method handleViewSizeSwitcher\r\n         */\r\n        handleViewSizeSwitcher: function() {\r\n            $(document).on('change', '#filter_pagesize', function() {\r\n                t.redirectURL();\r\n            });\r\n            // This should work for mobile.\r\n            $(document).on('change', '#filter_pagesize_mobile', function() {\r\n                t.redirectURL();\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Handle redirect URL.\r\n         *\r\n         * @method redirectURL\r\n         */\r\n        redirectURL: function() {\r\n            var url = $('#view_sort_action_url').val();\r\n            var vid = $('#vid').val();\r\n            var groupidelement = $('#groupid');\r\n            if (groupidelement.length > 0) {\r\n                var groupid = groupidelement.val();\r\n                url = url + '&groupid=' + groupid;\r\n            }\r\n            url = url + '&vid=' + vid;\r\n\r\n            $('.openstudio-filter-select-box:visible').each(function() {\r\n                var name = $(this).attr('name');\r\n                url = url + '&' + name + '=' + $(this).val();\r\n            });\r\n\r\n            window.location.href = url;\r\n\r\n        },\r\n\r\n        /**\r\n         * Handle actions for filter.\r\n         *\r\n         * @method handleFilter\r\n         */\r\n        handleFilter: function() {\r\n\r\n            // By post types.\r\n            $('#openstudio_filter_types_0').on('click', function(e) {\r\n                var checkbox = $(this);\r\n\r\n                // Prevent checkbox from unchecking when clicked.\r\n                if (!checkbox.is(\":checked\")) {\r\n                    e.preventDefault();\r\n                    return false;\r\n                }\r\n\r\n                $('.openstudio-filter-types-checkbox').prop(\"checked\", false);\r\n                $('#openstudio_filter_types_0').prop(\"checked\", true);\r\n\r\n                // Clear quick select.\r\n                t.updateQuickSelect(null);\r\n            });\r\n\r\n            $('.openstudio-filter-types-checkbox').on(\"click\", function() {\r\n                var checkbox = $(this);\r\n\r\n                if (checkbox.is(\":checked\") && checkbox.attr('id') != \"openstudio_filter_types_0\") {\r\n                    $('#openstudio_filter_types_0').prop(\"checked\", false);\r\n                }\r\n\r\n                var length = $('[name=\"ftypearray[]\"]:checked').length;\r\n\r\n                if (length == 0) {\r\n                    $('#openstudio_filter_types_0').prop(\"checked\", true);\r\n                }\r\n\r\n                // Clear quick select.\r\n                t.updateQuickSelect(null);\r\n            });\r\n\r\n\r\n            // By user flags.\r\n            $('#openstudio_filter_user_flags_0').on(\"click\", function(e) {\r\n                var checkbox = $(this);\r\n\r\n                // Prevent checkbox from unchecking when clicked.\r\n                if (!checkbox.is(\":checked\")) {\r\n                    e.preventDefault();\r\n                    return false;\r\n                }\r\n\r\n                $('.openstudio-filter-user-flags-checkbox').prop(\"checked\", false);\r\n                $('#openstudio_filter_user_flags_0').prop(\"checked\", true);\r\n\r\n                // Clear quick select.\r\n                t.updateQuickSelect(null);\r\n            });\r\n\r\n            $('.openstudio-filter-user-flags-checkbox').on(\"click\", function() {\r\n                var checkbox = $(this);\r\n\r\n                if (checkbox.is(\":checked\") && checkbox.attr('id') != \"openstudio_filter_types_0\") {\r\n                    $('#openstudio_filter_user_flags_0').prop(\"checked\", false);\r\n                }\r\n\r\n                var length = $('[name=\"fflagarray[]\"]:checked').length;\r\n\r\n                if (length == 0) {\r\n                    $('#openstudio_filter_user_flags_0').prop(\"checked\", true);\r\n                }\r\n\r\n                // Clear quick select.\r\n                t.updateQuickSelect(null);\r\n            });\r\n\r\n            // Select status.\r\n            $('input[name=\"fstatus\"]').on('change', function() {\r\n                // Clear quick select.\r\n                t.updateQuickSelect(null);\r\n            });\r\n\r\n            // By author.\r\n            $('input[name=\"fscope\"]').on('change', function() {\r\n                // Clear quick select.\r\n                t.updateQuickSelect(null);\r\n            });\r\n\r\n            // Reset button.\r\n            $('#reset_filter_btn').on('click', function() {\r\n                $('#reset_filter').val(1);\r\n                $('#filteractive').val(0);\r\n                $(t.SELECTOR.FILTER_FORM).submit();\r\n            });\r\n\r\n            // Set Blocks option selected when a block checked.\r\n            // When do not has any block checked, all option should be selected.\r\n            $(t.SELECTOR.BLOCK_ITEM).on('click', function() {\r\n                var checkbox = $(this);\r\n                var value = $(this).val();\r\n                var checkActivities = false;\r\n                var className = '.openstudio-filter-block-' + value + '-activity';\r\n\r\n                if (checkbox.is(\":checked\")) {\r\n                    t.checkAreaInput(t.SELECTOR.AREA_ACTIVITIES_ID, true);\r\n                    checkActivities = true;\r\n                }\r\n\r\n                $(className).prop(\"checked\", checkActivities);\r\n\r\n                var length = $('[name=\"fblockarray[]\"]:checked').length;\r\n                var lengthActivity = $('[name=\"factivityarray[]\"]:checked').length;\r\n\r\n                if (length === 0 && lengthActivity === 0) {\r\n                    t.checkAreaInput(t.SELECTOR.AREA_ALL, true);\r\n                }\r\n            });\r\n\r\n            // Set Activities option selected when a activity checked.\r\n            $(t.SELECTOR.ACTIVITY_ITEM).on('click', function() {\r\n                var checkbox = $(this);\r\n                var blockId = $(this).attr('data-block-id');\r\n                var blockElementId = '#openstudio_filter_block_' + blockId;\r\n                var className = '.openstudio-filter-block-' + blockId + '-activity';\r\n                var hasUnchecked = $(className + ':not(:checked)').length;\r\n\r\n                if (checkbox.is(\":checked\")) {\r\n                    t.checkAreaInput(t.SELECTOR.AREA_ACTIVITIES_ID, true);\r\n                    $(blockElementId).prop(\"checked\", true);\r\n                }\r\n\r\n                // If all activities are all un-checked, then block should be un-checked.\r\n                if (hasUnchecked === 0) {\r\n                    $(blockElementId).prop(\"checked\", true);\r\n                } else {\r\n                    $(blockElementId).prop(\"checked\", false);\r\n                }\r\n\r\n                var hasCheck = $(t.SELECTOR.ACTIVITY_ITEM + ':checked').length;\r\n                if (hasCheck === 0) {\r\n                    t.checkAreaInput(t.SELECTOR.AREA_ALL, true);\r\n                }\r\n            });\r\n\r\n            // Sort by.\r\n            t.handleSortBy();\r\n\r\n            // Handle Quick Select.\r\n            t.handleQuickSelect();\r\n        },\r\n        /**\r\n         * Handle collapse click for profile bar.\r\n         *\r\n         * @method handleCollapseClick\r\n         */\r\n        handleCollapseClick: function() {\r\n            var myprofile = document.querySelector('.openstudio-profile-mypaticipation-content');\r\n            var fullusername = document.getElementById('openstudio_profile_fullusername');\r\n            var profilleparticipate =\r\n                document.querySelector('#openstudio_profile_bar .openstudio-profile-bar-participation-content');\r\n            var profilleparticipatemobile =\r\n                document.querySelector('#openstudio_profile_bar_mobile .openstudio-profile-bar-participation-content');\r\n            var progressbar = document.getElementsByClassName('openstudio-profile-progress-content');\r\n            var showprofile = null;\r\n            var showparticipate = null;\r\n            var body = document.querySelector('body');\r\n            for (var i = 0; i < progressbar.length; i++) {\r\n                if (progressbar && progressbar[i] && progressbar[i].clientHeight > 0) {\r\n                    showprofile = progressbar[i];\r\n                }\r\n            }\r\n            if (body.classList.contains('ios') || body.classList.contains('android')) {\r\n                showparticipate = profilleparticipatemobile;\r\n            } else {\r\n                showparticipate = profilleparticipate;\r\n            }\r\n            if (fullusername && showprofile) {\r\n                var originalmarginTop = showprofile.style.marginTop ? showprofile.style.marginTop : '0px';\r\n                var originalpaddingTop = showprofile.style.paddingTop ? showprofile.style.paddingTop : '0px';\r\n                fullusername.addEventListener('click', function() {\r\n                    var w = window.innerWidth;\r\n                    if ((w > 767 && w < 1204 && (!body.classList.contains('ios') && !body.classList.contains('android')))\r\n                        || (w > 767 && w < 940 && (body.classList.contains('ios') || body.classList.contains('android')))) {\r\n                        if (fullusername.classList.contains('collapsed')) {\r\n                            setTimeout(function() {\r\n                                // Two line\r\n                                if (showparticipate && fullusername.clientHeight > 21) {\r\n                                    if (myprofile && myprofile.getBoundingClientRect().height >\r\n                                        showparticipate.getBoundingClientRect().height) {\r\n                                        if (showprofile.getBoundingClientRect().top > myprofile.getBoundingClientRect().bottom) {\r\n                                            showprofile.style.marginTop = originalmarginTop + 3 + 'px';\r\n                                        } else {\r\n                                            showprofile.style.marginTop = myprofile.getBoundingClientRect().bottom -\r\n                                                showprofile.getBoundingClientRect().top + 'px';\r\n                                        }\r\n                                    } else if (showparticipate) {\r\n                                        if (showprofile.getBoundingClientRect().top >\r\n                                            showparticipate.getBoundingClientRect().bottom) {\r\n                                            showprofile.style.marginTop = originalmarginTop + 3 + 'px';\r\n                                        } else {\r\n                                            showprofile.style.marginTop = showparticipate.getBoundingClientRect().bottom -\r\n                                                showprofile.getBoundingClientRect().top + 'px';\r\n                                        }\r\n                                    }\r\n                                    if (body.classList.contains('ios') || body.classList.contains('android')) {\r\n                                        showprofile.style.paddingTop = '5px';\r\n                                    } else {\r\n                                        showprofile.style.paddingTop = '9px';\r\n                                    }\r\n                                }\r\n\r\n                            }, 500);\r\n                        } else {\r\n                            showprofile.style.paddingTop = originalpaddingTop;\r\n                            showprofile.style.marginTop = originalmarginTop;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Init query string for search form.\r\n         * Because oustudyplan renderer does not allow us to set value for input while rendering search form.\r\n         *\r\n         * @method initSearchForm\r\n         */\r\n        initSearchForm: function() {\r\n            $(t.CSS.SEARCHBOX).val(t.mconfig.searchtext);\r\n        },\r\n\r\n        /**\r\n         * Handle select from dropdown.\r\n         *\r\n         * @param {String} id\r\n         */\r\n        handleSelectFrom: function(id) {\r\n            // Get the placeholder at the begining.\r\n            var placeholder = $(id + '-placeholder');\r\n            placeholder.text($('#filter_block option:selected').text());\r\n\r\n            // Build select dropdown.\r\n            var area = $(id);\r\n            var anchor = $(id + '-anchor');\r\n            var contentArea = $(id + '-area');\r\n\r\n            anchor.on('click', function() {\r\n                if (contentArea.hasClass('visible')) {\r\n                    contentArea.removeClass('visible');\r\n                } else {\r\n                    contentArea.addClass('visible');\r\n                }\r\n            });\r\n\r\n            // Support for tab.\r\n            anchor.on('keydown', function(e) {\r\n                // Work with Space + Enter.\r\n                if (e.keyCode === 32 || e.keyCode === 13) {\r\n                    e.preventDefault();\r\n                    anchor.trigger('click');\r\n                }\r\n            });\r\n\r\n            // Handle click outside should close content area.\r\n            $(window).click(function(e) {\r\n                var target = $(e.target);\r\n                var areaHTML = area.get(0);\r\n                var targetHTML = target.get(0);\r\n                // If target is on area => skip.\r\n                // If target is area itself => skip.\r\n                if ($.contains(areaHTML, targetHTML) || this === areaHTML) {\r\n                    return;\r\n                }\r\n                if (contentArea.hasClass('visible')) {\r\n                    contentArea.removeClass('visible');\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Check event for area input.\r\n         *\r\n         * @param {String} input\r\n         * @param {Bool} checked\r\n         */\r\n        checkAreaInput: function(input, checked = true) {\r\n            $(input).prop('checked', checked);\r\n            $(t.SELECTOR.AREA_INPUT).not(input).prop('checked', !checked);\r\n            t.updateFilterBlock($(input).val());\r\n        },\r\n\r\n        /**\r\n         * Check if the main filter is expanded.\r\n         *\r\n         * @returns {boolean}\r\n         */\r\n        isFilterExpanded: function() {\r\n            return $(t.SELECTOR.FILTER_CONTAINER).hasClass('show');\r\n        },\r\n\r\n        /**\r\n         * Handle sort by filter.\r\n         */\r\n        handleSortBy: function() {\r\n            $(t.SELECTOR.FILTER_SORT_BY).on('change', function() {\r\n                t.redirectURL();\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Handle Quick Select filter.\r\n         */\r\n        handleQuickSelect: function() {\r\n            $(t.SELECTOR.FILTER_QUICK_SELECT).on('change', function() {\r\n                var params = $(this).find(':selected').data('params');\r\n                var value = $(this).val();\r\n                var isMobile = $(this).data('mobile');\r\n\r\n                // If filter is not expand, open it.\r\n                if (!t.isFilterExpanded() && !isMobile) {\r\n                    $(t.SELECTOR.FILTER_LINK).trigger('click');\r\n                }\r\n\r\n                if (typeof params !== 'object' || params.length === 0) {\r\n                    return;\r\n                }\r\n\r\n                // Apply quick select.\r\n                t.updateQuickSelect(value);\r\n\r\n                // Apply post types.\r\n                if (params.hasOwnProperty('ftypearray')) {\r\n                    $('[name=\"ftypearray[]\"]').val(params.ftypearray);\r\n                }\r\n\r\n                // Apply user flags.\r\n                if (params.hasOwnProperty('fflagarray')) {\r\n                    $('[name=\"fflagarray[]\"]').val(params.fflagarray);\r\n                }\r\n\r\n                // Apply user status.\r\n                if (params.hasOwnProperty('fstatus')) {\r\n                    $('[name=\"fstatus\"]').val([params.fstatus]);\r\n                }\r\n\r\n                // Apply scope.\r\n                if (params.hasOwnProperty('fscope')) {\r\n                    $('[name=\"fscope\"]').val([params.fscope]);\r\n                }\r\n\r\n                if (isMobile) {\r\n                    $(t.SELECTOR.FILTER_FORM).submit();\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Update quick select input.\r\n         *\r\n         * @param {?Integer} value\r\n         */\r\n        updateQuickSelect: function(value = null) {\r\n            $('[name=\"quickselect\"]').val(value);\r\n        }\r\n    };\r\n\r\n    return t;\r\n\r\n});\r\n"],"names":["define","$","Isotope","t","isotope","mconfig","CSS","SEARCHBOX","SELECTOR","FILTER_CONTAINER","FILTER_FORM","SELECT_FROM","AREA_ALL","AREA_ACTIVITIES_ID","AREA_INPUT","BLOCK_ITEM","ACTIVITY_ITEM","FILTER_SORT_BY","FILTER_QUICK_SELECT","FILTER_LINK","CONFIG","searchtext","hasselectfrom","hasfilterform","init","options","handleFilter","handleIsotope","handleGroupSwitcher","handleViewSizeSwitcher","handleBlockSwitcher","initSearchForm","handleCollapseClick","hasOwnProperty","handleSelectFrom","each","push","this","id","layoutMode","itemSelector","masonry","columnWidth","gutter","horizontalOrder","window","on","reArrangeItems","setTimeout","i","grid","layout","document","redirectURL","not","prop","value","val","checked","is","areaActivityValue","checkBlocks","parseInt","updateFilterBlock","html","text","url","vid","groupidelement","length","groupid","name","attr","location","href","e","preventDefault","updateQuickSelect","checkbox","submit","checkActivities","className","checkAreaInput","lengthActivity","blockId","blockElementId","hasUnchecked","handleSortBy","handleQuickSelect","myprofile","querySelector","fullusername","getElementById","profilleparticipate","profilleparticipatemobile","progressbar","getElementsByClassName","showprofile","showparticipate","body","clientHeight","classList","contains","originalmarginTop","style","marginTop","originalpaddingTop","paddingTop","addEventListener","w","innerWidth","getBoundingClientRect","height","top","bottom","area","anchor","contentArea","hasClass","removeClass","addClass","keyCode","trigger","click","target","areaHTML","get","targetHTML","input","isFilterExpanded","params","find","data","isMobile","ftypearray","fflagarray","fstatus","fscope"],"mappings":"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"}