{"version":3,"file":"viewhelper.min.js","sources":["../src/viewhelper.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JavaScript to manage on view page.\n *\n * @package\n * @copyright 2017 The Open University\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * @module mod_openstudio/viewhelper\n */\n\ndefine(['jquery', 'js/isotope.pkgd.min.js'], function($, Isotope) {\n    var t;\n\n    t = {\n\n        /**\n         * Isotope instance.\n         * There are more than a grid in a page\n         */\n        isotope: [],\n\n        /**\n         * Module config. Passed from server side.\n         * {\n         *     searchtext: string\n         * }\n         */\n        mconfig: null,\n\n        /**\n         * List out all of css selector used in this module.\n         */\n        CSS: {\n            SEARCHBOX: '#oustudyplan-query'\n        },\n\n        /**\n         * Element selectors.\n         */\n        SELECTOR: {\n            FILTER_CONTAINER: '#filter_container',\n            FILTER_FORM: '#openstudio-filter-form',\n            SELECT_FROM: '#openstudio-filter-select-from',\n            AREA_ALL: '#filter_block_0',\n            AREA_ACTIVITIES_ID: '#filter_block_2',\n            AREA_INPUT: '#openstudio-filter-select-from .openstudio-filter-area-input',\n            BLOCK_ITEM: '#openstudio-filter-select-from .openstudio-filter-block',\n            ACTIVITY_ITEM: '#openstudio-filter-select-from .openstudio-filter-block-activity',\n            FILTER_SORT_BY: '.openstudio_filter_sort_by',\n            FILTER_QUICK_SELECT: '.openstudio_filter_quick_select',\n            FILTER_LINK: '.openstudio-filter-link a',\n        },\n\n        /**\n         * Default config.\n         */\n        CONFIG: {\n            searchtext: '',\n            hasselectfrom: false,\n            hasfilterform: false,\n        },\n\n        /**\n         * Initialise this module.\n         *\n         * @param {JSON} options  The settings for this feature.\n         */\n        init: function(options) {\n            t.mconfig = options || t.CONFIG;\n\n            t.handleFilter();\n            t.handleIsotope();\n            t.handleGroupSwitcher();\n            t.handleViewSizeSwitcher();\n            t.handleBlockSwitcher();\n            t.initSearchForm();\n            t.handleCollapseClick();\n\n            if (t.mconfig.hasOwnProperty('hasselectfrom') && t.mconfig.hasselectfrom === true) {\n                t.handleSelectFrom(t.SELECTOR.SELECT_FROM);\n            }\n        },\n\n        /**\n         * Handle items will be shown via Isotope masonry template.\n         *\n         * @method handleTooltip\n         */\n        handleIsotope: function() {\n            var container = $('.openstudio-grid');\n            container.each(function() {\n                t.isotope[this.id] = new Isotope('#' + this.id, {\n                    layoutMode: 'masonry',\n                    itemSelector: '.openstudio-grid-item',\n                    masonry: {\n                        columnWidth: 243,\n                        gutter: 20,\n                        horizontalOrder: true\n                    }\n                });\n            });\n            // Publish isotope for other functions to use.\n            window.isotope = t.isotope;\n\n            // Once all images loaded, try to re-arrange all items.\n            $(window).on('load', function() {\n                t.reArrangeItems();\n            });\n        },\n\n        /**\n         * Re-arrange items\n         *\n         * @method reArrangeItems\n         */\n        reArrangeItems: function() {\n            setTimeout(function() {\n                $.each(t.isotope, function(i, grid) {\n                    grid.layout();\n                });\n            }, 1000);\n        },\n\n        /**\n         * Handle when user filter by group.\n         *\n         * @method handleGroupSwitcher\n         */\n        handleGroupSwitcher: function() {\n            // This should work for mobile also.\n            $(document).on('change', '#filter_groupid', function() {\n                t.redirectURL();\n            });\n        },\n\n        /**\n         * Handle when user filter by block.\n         *\n         * @method handleBlockSwitcher\n         */\n        handleBlockSwitcher: function() {\n\n            $(t.SELECTOR.AREA_INPUT).on('click', function() {\n                $(t.SELECTOR.AREA_INPUT).not(this).prop('checked', false);\n            });\n\n            $(t.SELECTOR.AREA_INPUT).on('change', function() {\n                var value = $(this).val();\n                var checked = $(this).is(':checked');\n                var areaActivityValue = $('#filter_area_activity_value').val();\n                var checkBlocks = false;\n\n                if (checked) {\n                    // If we check on activity, then all blocks and activities should be checked all.\n                    if (parseInt(value) === parseInt(areaActivityValue)) {\n                        checkBlocks = true;\n                    }\n                } else {\n                    value = 0;\n                    $(t.SELECTOR.AREA_ALL).prop('checked', true);\n                }\n\n                $(t.SELECTOR.BLOCK_ITEM).prop('checked', checkBlocks);\n                $(t.SELECTOR.ACTIVITY_ITEM).prop('checked', checkBlocks);\n\n                t.updateFilterBlock(value);\n            });\n        },\n\n        /**\n         * Update to the old filter block hidden input + change placeholder.\n         *\n         * @param {Integer} value\n         */\n        updateFilterBlock: function(value) {\n            // Apply to old filter_block.\n            $('#filter_block').val(value);\n\n            // Change the placeholder.\n            $(t.SELECTOR.SELECT_FROM + '-placeholder').html($('#filter_block option:selected').text());\n        },\n\n        /**\n         * Handle when user filter by view number.\n         *\n         * @method handleViewSizeSwitcher\n         */\n        handleViewSizeSwitcher: function() {\n            $(document).on('change', '#filter_pagesize', function() {\n                t.redirectURL();\n            });\n            // This should work for mobile.\n            $(document).on('change', '#filter_pagesize_mobile', function() {\n                t.redirectURL();\n            });\n        },\n\n        /**\n         * Handle redirect URL.\n         *\n         * @method redirectURL\n         */\n        redirectURL: function() {\n            var url = $('#view_sort_action_url').val();\n            var vid = $('#vid').val();\n            var groupidelement = $('#groupid');\n            if (groupidelement.length > 0) {\n                var groupid = groupidelement.val();\n                url = url + '&groupid=' + groupid;\n            }\n            url = url + '&vid=' + vid;\n\n            $('.openstudio-filter-select-box:visible').each(function() {\n                var name = $(this).attr('name');\n                url = url + '&' + name + '=' + $(this).val();\n            });\n\n            window.location.href = url;\n\n        },\n\n        /**\n         * Handle actions for filter.\n         *\n         * @method handleFilter\n         */\n        handleFilter: function() {\n\n            // By post types.\n            $('#openstudio_filter_types_0').on('click', function(e) {\n                var checkbox = $(this);\n\n                // Prevent checkbox from unchecking when clicked.\n                if (!checkbox.is(\":checked\")) {\n                    e.preventDefault();\n                    return false;\n                }\n\n                $('.openstudio-filter-types-checkbox').prop(\"checked\", false);\n                $('#openstudio_filter_types_0').prop(\"checked\", true);\n\n                // Clear quick select.\n                t.updateQuickSelect(null);\n            });\n\n            $('.openstudio-filter-types-checkbox').on(\"click\", function() {\n                var checkbox = $(this);\n\n                if (checkbox.is(\":checked\") && checkbox.attr('id') != \"openstudio_filter_types_0\") {\n                    $('#openstudio_filter_types_0').prop(\"checked\", false);\n                }\n\n                var length = $('[name=\"ftypearray[]\"]:checked').length;\n\n                if (length == 0) {\n                    $('#openstudio_filter_types_0').prop(\"checked\", true);\n                }\n\n                // Clear quick select.\n                t.updateQuickSelect(null);\n            });\n\n\n            // By user flags.\n            $('#openstudio_filter_user_flags_0').on(\"click\", function(e) {\n                var checkbox = $(this);\n\n                // Prevent checkbox from unchecking when clicked.\n                if (!checkbox.is(\":checked\")) {\n                    e.preventDefault();\n                    return false;\n                }\n\n                $('.openstudio-filter-user-flags-checkbox').prop(\"checked\", false);\n                $('#openstudio_filter_user_flags_0').prop(\"checked\", true);\n\n                // Clear quick select.\n                t.updateQuickSelect(null);\n            });\n\n            $('.openstudio-filter-user-flags-checkbox').on(\"click\", function() {\n                var checkbox = $(this);\n\n                if (checkbox.is(\":checked\") && checkbox.attr('id') != \"openstudio_filter_types_0\") {\n                    $('#openstudio_filter_user_flags_0').prop(\"checked\", false);\n                }\n\n                var length = $('[name=\"fflagarray[]\"]:checked').length;\n\n                if (length == 0) {\n                    $('#openstudio_filter_user_flags_0').prop(\"checked\", true);\n                }\n\n                // Clear quick select.\n                t.updateQuickSelect(null);\n            });\n\n            // Select status.\n            $('input[name=\"fstatus\"]').on('change', function() {\n                // Clear quick select.\n                t.updateQuickSelect(null);\n            });\n\n            // By author.\n            $('input[name=\"fscope\"]').on('change', function() {\n                // Clear quick select.\n                t.updateQuickSelect(null);\n            });\n\n            // Reset button.\n            $('#reset_filter_btn').on('click', function() {\n                $('#reset_filter').val(1);\n                $('#filteractive').val(0);\n                $(t.SELECTOR.FILTER_FORM).submit();\n            });\n\n            // Set Blocks option selected when a block checked.\n            // When do not has any block checked, all option should be selected.\n            $(t.SELECTOR.BLOCK_ITEM).on('click', function() {\n                var checkbox = $(this);\n                var value = $(this).val();\n                var checkActivities = false;\n                var className = '.openstudio-filter-block-' + value + '-activity';\n\n                if (checkbox.is(\":checked\")) {\n                    t.checkAreaInput(t.SELECTOR.AREA_ACTIVITIES_ID, true);\n                    checkActivities = true;\n                }\n\n                $(className).prop(\"checked\", checkActivities);\n\n                var length = $('[name=\"fblockarray[]\"]:checked').length;\n                var lengthActivity = $('[name=\"factivityarray[]\"]:checked').length;\n\n                if (length === 0 && lengthActivity === 0) {\n                    t.checkAreaInput(t.SELECTOR.AREA_ALL, true);\n                }\n            });\n\n            // Set Activities option selected when a activity checked.\n            $(t.SELECTOR.ACTIVITY_ITEM).on('click', function() {\n                var checkbox = $(this);\n                var blockId = $(this).attr('data-block-id');\n                var blockElementId = '#openstudio_filter_block_' + blockId;\n                var className = '.openstudio-filter-block-' + blockId + '-activity';\n                var hasUnchecked = $(className + ':not(:checked)').length;\n\n                if (checkbox.is(\":checked\")) {\n                    t.checkAreaInput(t.SELECTOR.AREA_ACTIVITIES_ID, true);\n                    $(blockElementId).prop(\"checked\", true);\n                }\n\n                // If all activities are all un-checked, then block should be un-checked.\n                if (hasUnchecked === 0) {\n                    $(blockElementId).prop(\"checked\", true);\n                } else {\n                    $(blockElementId).prop(\"checked\", false);\n                }\n\n                var hasCheck = $(t.SELECTOR.ACTIVITY_ITEM + ':checked').length;\n                if (hasCheck === 0) {\n                    t.checkAreaInput(t.SELECTOR.AREA_ALL, true);\n                }\n            });\n\n            // Sort by.\n            t.handleSortBy();\n\n            // Handle Quick Select.\n            t.handleQuickSelect();\n        },\n        /**\n         * Handle collapse click for profile bar.\n         *\n         * @method handleCollapseClick\n         */\n        handleCollapseClick: function() {\n            var myprofile = document.querySelector('.openstudio-profile-mypaticipation-content');\n            var fullusername = document.getElementById('openstudio_profile_fullusername');\n            var profilleparticipate =\n                document.querySelector('#openstudio_profile_bar .openstudio-profile-bar-participation-content');\n            var profilleparticipatemobile =\n                document.querySelector('#openstudio_profile_bar_mobile .openstudio-profile-bar-participation-content');\n            var progressbar = document.getElementsByClassName('openstudio-profile-progress-content');\n            var showprofile = null;\n            var showparticipate = null;\n            var body = document.querySelector('body');\n            for (var i = 0; i < progressbar.length; i++) {\n                if (progressbar && progressbar[i] && progressbar[i].clientHeight > 0) {\n                    showprofile = progressbar[i];\n                }\n            }\n            if (body.classList.contains('ios') || body.classList.contains('android')) {\n                showparticipate = profilleparticipatemobile;\n            } else {\n                showparticipate = profilleparticipate;\n            }\n            if (fullusername && showprofile) {\n                var originalmarginTop = showprofile.style.marginTop ? showprofile.style.marginTop : '0px';\n                var originalpaddingTop = showprofile.style.paddingTop ? showprofile.style.paddingTop : '0px';\n                fullusername.addEventListener('click', function() {\n                    var w = window.innerWidth;\n                    if ((w > 767 && w < 1204 && (!body.classList.contains('ios') && !body.classList.contains('android')))\n                        || (w > 767 && w < 940 && (body.classList.contains('ios') || body.classList.contains('android')))) {\n                        if (fullusername.classList.contains('collapsed')) {\n                            setTimeout(function() {\n                                // Two line\n                                if (showparticipate && fullusername.clientHeight > 21) {\n                                    if (myprofile && myprofile.getBoundingClientRect().height >\n                                        showparticipate.getBoundingClientRect().height) {\n                                        if (showprofile.getBoundingClientRect().top > myprofile.getBoundingClientRect().bottom) {\n                                            showprofile.style.marginTop = originalmarginTop + 3 + 'px';\n                                        } else {\n                                            showprofile.style.marginTop = myprofile.getBoundingClientRect().bottom -\n                                                showprofile.getBoundingClientRect().top + 'px';\n                                        }\n                                    } else if (showparticipate) {\n                                        if (showprofile.getBoundingClientRect().top >\n                                            showparticipate.getBoundingClientRect().bottom) {\n                                            showprofile.style.marginTop = originalmarginTop + 3 + 'px';\n                                        } else {\n                                            showprofile.style.marginTop = showparticipate.getBoundingClientRect().bottom -\n                                                showprofile.getBoundingClientRect().top + 'px';\n                                        }\n                                    }\n                                    if (body.classList.contains('ios') || body.classList.contains('android')) {\n                                        showprofile.style.paddingTop = '5px';\n                                    } else {\n                                        showprofile.style.paddingTop = '9px';\n                                    }\n                                }\n\n                            }, 500);\n                        } else {\n                            showprofile.style.paddingTop = originalpaddingTop;\n                            showprofile.style.marginTop = originalmarginTop;\n                        }\n                    }\n                });\n            }\n        },\n\n        /**\n         * Init query string for search form.\n         * Because oustudyplan renderer does not allow us to set value for input while rendering search form.\n         *\n         * @method initSearchForm\n         */\n        initSearchForm: function() {\n            $(t.CSS.SEARCHBOX).val(t.mconfig.searchtext);\n        },\n\n        /**\n         * Handle select from dropdown.\n         *\n         * @param {String} id\n         */\n        handleSelectFrom: function(id) {\n            // Get the placeholder at the begining.\n            var placeholder = $(id + '-placeholder');\n            placeholder.text($('#filter_block option:selected').text());\n\n            // Build select dropdown.\n            var area = $(id);\n            var anchor = $(id + '-anchor');\n            var contentArea = $(id + '-area');\n\n            anchor.on('click', function() {\n                if (contentArea.hasClass('visible')) {\n                    contentArea.removeClass('visible');\n                } else {\n                    contentArea.addClass('visible');\n                }\n            });\n\n            // Support for tab.\n            anchor.on('keydown', function(e) {\n                // Work with Space + Enter.\n                if (e.keyCode === 32 || e.keyCode === 13) {\n                    e.preventDefault();\n                    anchor.trigger('click');\n                }\n            });\n\n            // Handle click outside should close content area.\n            $(window).click(function(e) {\n                var target = $(e.target);\n                var areaHTML = area.get(0);\n                var targetHTML = target.get(0);\n                // If target is on area => skip.\n                // If target is area itself => skip.\n                if ($.contains(areaHTML, targetHTML) || this === areaHTML) {\n                    return;\n                }\n                if (contentArea.hasClass('visible')) {\n                    contentArea.removeClass('visible');\n                }\n            });\n        },\n\n        /**\n         * Check event for area input.\n         *\n         * @param {String} input\n         * @param {Bool} checked\n         */\n        checkAreaInput: function(input, checked = true) {\n            $(input).prop('checked', checked);\n            $(t.SELECTOR.AREA_INPUT).not(input).prop('checked', !checked);\n            t.updateFilterBlock($(input).val());\n        },\n\n        /**\n         * Check if the main filter is expanded.\n         *\n         * @returns {boolean}\n         */\n        isFilterExpanded: function() {\n            return $(t.SELECTOR.FILTER_CONTAINER).hasClass('show');\n        },\n\n        /**\n         * Handle sort by filter.\n         */\n        handleSortBy: function() {\n            $(t.SELECTOR.FILTER_SORT_BY).on('change', function() {\n                t.redirectURL();\n            });\n        },\n\n        /**\n         * Handle Quick Select filter.\n         */\n        handleQuickSelect: function() {\n            $(t.SELECTOR.FILTER_QUICK_SELECT).on('change', function() {\n                var params = $(this).find(':selected').data('params');\n                var value = $(this).val();\n                var isMobile = $(this).data('mobile');\n\n                // If filter is not expand, open it.\n                if (!t.isFilterExpanded() && !isMobile) {\n                    $(t.SELECTOR.FILTER_LINK).trigger('click');\n                }\n\n                if (typeof params !== 'object' || params.length === 0) {\n                    return;\n                }\n\n                // Apply quick select.\n                t.updateQuickSelect(value);\n\n                // Apply post types.\n                if (params.hasOwnProperty('ftypearray')) {\n                    $('[name=\"ftypearray[]\"]').val(params.ftypearray);\n                }\n\n                // Apply user flags.\n                if (params.hasOwnProperty('fflagarray')) {\n                    $('[name=\"fflagarray[]\"]').val(params.fflagarray);\n                }\n\n                // Apply user status.\n                if (params.hasOwnProperty('fstatus')) {\n                    $('[name=\"fstatus\"]').val([params.fstatus]);\n                }\n\n                // Apply scope.\n                if (params.hasOwnProperty('fscope')) {\n                    $('[name=\"fscope\"]').val([params.fscope]);\n                }\n\n                if (isMobile) {\n                    $(t.SELECTOR.FILTER_FORM).submit();\n                }\n            });\n        },\n\n        /**\n         * Update quick select input.\n         *\n         * @param {?Integer} value\n         */\n        updateQuickSelect: function(value = null) {\n            $('[name=\"quickselect\"]').val(value);\n        }\n    };\n\n    return t;\n\n});\n"],"names":["define","$","Isotope","t","isotope","mconfig","CSS","SEARCHBOX","SELECTOR","FILTER_CONTAINER","FILTER_FORM","SELECT_FROM","AREA_ALL","AREA_ACTIVITIES_ID","AREA_INPUT","BLOCK_ITEM","ACTIVITY_ITEM","FILTER_SORT_BY","FILTER_QUICK_SELECT","FILTER_LINK","CONFIG","searchtext","hasselectfrom","hasfilterform","init","options","handleFilter","handleIsotope","handleGroupSwitcher","handleViewSizeSwitcher","handleBlockSwitcher","initSearchForm","handleCollapseClick","hasOwnProperty","handleSelectFrom","each","this","id","layoutMode","itemSelector","masonry","columnWidth","gutter","horizontalOrder","window","on","reArrangeItems","setTimeout","i","grid","layout","document","redirectURL","not","prop","value","val","checked","is","areaActivityValue","checkBlocks","parseInt","updateFilterBlock","html","text","url","vid","groupidelement","length","groupid","name","attr","location","href","e","preventDefault","updateQuickSelect","checkbox","submit","checkActivities","className","checkAreaInput","lengthActivity","blockId","blockElementId","hasUnchecked","handleSortBy","handleQuickSelect","myprofile","querySelector","fullusername","getElementById","profilleparticipate","profilleparticipatemobile","progressbar","getElementsByClassName","showprofile","showparticipate","body","clientHeight","classList","contains","originalmarginTop","style","marginTop","originalpaddingTop","paddingTop","addEventListener","w","innerWidth","getBoundingClientRect","height","top","bottom","area","anchor","contentArea","hasClass","removeClass","addClass","keyCode","trigger","click","target","areaHTML","get","targetHTML","input","isFilterExpanded","params","find","data","isMobile","ftypearray","fflagarray","fstatus","fscope"],"mappings":"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"}