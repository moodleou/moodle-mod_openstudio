{"version":3,"file":"contentpage.min.js","sources":["../src/contentpage.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JavaScript to manage content detail page.\n *\n * @package\n * @copyright 2017 The Open University\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * @module mod_oucontent/contentpage\n */\ndefine(['jquery',\n        'core/ajax',\n        'core/str',\n        'core/modal',\n        'core/modal_events',\n        'core/templates',\n        'core/config',\n        'require',\n        'mod_openstudio/leaflet'\n    ],\n    function($, Ajax, Str, Modal, ModalEvents, Templates, Config, require, Leaflet) {\n        var t;\n\n        t = {\n\n            /**\n             * M.core.dialog instance\n             */\n            dialogue: null,\n\n            delete_item: null,\n\n            /**\n             * Module config. Passed from server side.\n             */\n            mconfig: null,\n\n            init: function(options) {\n                $.fx.off = true;\n\n                t.mconfig = options;\n\n                Y.use('moodle-core-notification-dialogue', function() {\n                    require(['mod_openstudio/osdialogue'], function(osDialogue){\n                        t.archiveDialogue = t.createArchiveDialogue(osDialogue);\n                        t.deleteContentDialogue = t.createDeleteContentDialogue(osDialogue);\n                    });\n                });\n\n                // Maximize feature.\n                t.createMaximizeModal();\n                $('#openstudio_content_view_maximize').on('click', t.toogleContentModal);\n                $('body').delegate('#openstudio_content_view_minimize', 'click', t.toogleContentModal);\n                $('body').delegate('.openstudio-modal-content-close', 'click', t.toogleContentModal);\n\n                var contentViewMapCanvas = $('#openstudio_content_view_map_canvas');\n\n                if (contentViewMapCanvas.length) {\n                    t.showGoogleMap(contentViewMapCanvas);\n                }\n\n                // Click event on archive button.\n                $('#id_archivebutton').on('click', function(e) {\n                    e.preventDefault();\n                    t.archiveDialogue.show();\n                });\n\n                // Click event on delete button.\n                $('.openstudio-delete-content-version').on('click', function(e) {\n                    e.preventDefault();\n                    t.delete_item = $(this);\n                    t.deleteContentDialogue.show();\n                });\n\n                const $spanInactive = $('.openstudio-content-view-icon-inactive-image');\n                const $spanActive = $('.openstudio-content-view-icon-active-image');\n                $(\".openstudio-content-view-flag-icon\").bind('click', function() {\n                    t.doFlagContent($(this));\n                    $(this).children().focus();\n                });\n                $(\".openstudio-content-view-icon-active-image\").bind('mouseover', function() {\n                    t.doHoverFlagIcon($(this));\n                });\n                // Handle keydown event to detect Enter key.\n                $spanInactive.add($spanActive).on('keydown', function(event) {\n                    if (event.key === 'Enter') {\n                        event.preventDefault();\n                        t.doFlagContent($(this).parent());\n                    }\n                });\n\n                $(\".openstudio-request-feedback-button\").bind('click', function() {\n                    t.doFlagContent($(this));\n                });\n\n                $(document).ready(t.showCommentBox);\n        },\n\n        /**\n         * Create modal to display content inside it when click maximize button.\n         *\n         * @method createMaximizeModal\n         */\n        createMaximizeModal: function() {\n            Templates\n                .render('mod_openstudio/content_modal', {\n                    title: $('.openstudio-content-view-title').text(),\n                    body: $('.openstudio-content-view-file').html(),\n                    date: $('.openstudio-content-view-date').html(),\n                    isiframecontent: $('.openstudio-content-view-file').find('iframe').length > 0\n                })\n                .done(function(html) {\n                    t.modal = new Modal(html);\n                    t.modal.setLarge();\n                });\n\n        },\n\n        /**\n         * Toggle content modal\n         *\n         * @method toogleContentModal\n         */\n        toogleContentModal: function() {\n            if (!t.modal) {\n              return;\n            }\n\n            if (t.modal.isVisible()) {\n                t.modal.hide();\n            } else {\n                t.modal.show();\n\n                // Auto scroll to close button when open content model.\n                t.modal.getRoot().on(ModalEvents.shown, function(e) {\n                    if (e.type === 'modal:shown')          {\n                         $('.openstudio-modal-content-close')[0].scrollIntoView();\n                    }\n                    $('.openstudio-modal-content-close, #openstudio_content_view_minimize').keydown(function (e) {\n                        if (e.keyCode == 13) {\n                            t.modal.hide();\n                            $('#openstudio_content_view_maximize').focus();\n\n                            return false;\n                        }\n                    });\n                });\n            }\n\n            // Lock page scroll.\n            $('body').toggleClass('openstudio-lockscroll');\n        },\n\n        /**\n         * Show Google map if user requested it and it is available.\n         *\n         * @param {Event} contentViewMapCanvas\n         * @method showGoogleMap\n         */\n        showGoogleMap: function(contentViewMapCanvas) {\n            var gpslat = contentViewMapCanvas.attr('data-gpslat');\n            var gpslng = contentViewMapCanvas.attr('data-gpslng');\n\n            if (gpslat && gpslng) {\n                var myLatLng = {lat: parseFloat(gpslat), lng: parseFloat(gpslng)};\n\n                if (typeof Leaflet !== 'undefined' && typeof Leaflet.map !== 'undefined') {\n                    // Initialize the map\n                    var map = Leaflet.map('openstudio_content_view_map_canvas').setView(myLatLng, 14);\n\n                    Str.get_string('leafletcoppyright', 'openstudio').done(function(string) {\n                        // Set up the OSM layer.\n                        Leaflet.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n                            attribution: string\n                        }).addTo(map);\n                    });\n\n                    // Add a marker.\n                    Leaflet.marker(myLatLng, {\n                        icon: Leaflet.icon({\n                            iconUrl: 'pix/marker.png',\n                            iconSize: [25, 41],\n                        })\n                    }).addTo(map);\n                }\n            }\n        },\n\n        /**\n         * Flag icons on content page.\n         *\n         * @param {Event} event\n         * @method doFlagContent\n         */\n        doFlagContent: function(event) {\n            var promises = Ajax.call([{\n                methodname: 'mod_openstudio_external_flag_content',\n                args: {\n                    cmid: event.attr('data-cmid'),\n                    cid: event.attr('data-cid'),\n                    fid: event.attr('data-fid'),\n                    mode: event.attr('data-mode')\n                }\n            }]);\n\n            promises[0]\n                .done(function(res) {\n                    if (res.success) {\n                        // Update new flag content.\n                        var flagcontainer = $('#content_view_icon_' + event.attr('data-cid') + '_' + res.fid);\n                        flagcontainer.attr('data-mode', res.mode);\n\n                        // Check if flag a request feedback.\n                        if (res.iscontentflagrequestfeedback) {\n                            flagcontainer.html(res.flagtext);\n                            $('#openstudio_item_request_feedback')\n                                .removeClass(res.flagremoveclass)\n                                .addClass(res.flagaddclass);\n                        } else {\n                            flagcontainer.find('.openstudio-content-view-icon-text').text(res.flagtext);\n                            flagcontainer.toggleClass('openstudio-content-view-icon-active', res.mode == 'off');\n                            flagcontainer.attr('title', res.accessiblemessage);\n                        }\n                    }\n                })\n                .fail(function(ex) {\n                    window.console.error('Error saving social flag ' + ex.message);\n                });\n        },\n        /**\n         * Hover flag icons on content page.\n         *\n         * @param {Event} event\n         * @method doHoverFlagIcon\n         */\n        doHoverFlagIcon: function(event) {\n            var parent = event.parents('.openstudio-content-view-flag-icon');\n            var activeImage = event.find('img');\n            activeImage.attr('title', parent.attr('title'));\n        },\n\n        /**\n         * Set header for dialog\n         *\n         * @method setHeader\n         * @param {Element} dialogue\n         * @param {Element} label\n         */\n        setHeader: function(dialogue, label) {\n            Str\n                .get_string(label, 'mod_openstudio')\n                .done(function(s) {\n                    dialogue.set('headerContent',\n                        '<span class=\"openstudio-dialogue-common-header\">' + s + '</span>');\n                });\n        },\n\n        /**\n         * Set body for dialog\n         *\n         * @method setBody\n         * @param {Element} dialogue\n         * @param {Element} label\n         */\n        setBody: function(dialogue, label) {\n            Str\n                .get_string(label, 'mod_openstudio')\n                .done(function(s) {\n                    dialogue.set('bodyContent',\n                        '<span>' + s + '</span>');\n                });\n        },\n\n        /**\n         * Create archive dialogue and some events on it.\n         *\n         * @method createArchiveDialogue\n         * @param {Element} osDialogue\n         * @return M.core.dialogue\n         */\n        createArchiveDialogue: function(osDialogue) {\n            var dialogue = new osDialogue({\n                closeButton: true,\n                visible: false,\n                centered: true,\n                responsive: true,\n                responsiveWidth: 767,\n                modal: true,\n                focusOnPreviousTargetAfterHide: true,\n                width: 521\n            });\n\n\n            t.setHeader(dialogue, 'archivedialogheader');\n            t.setBody(dialogue, 'modulejsdialogcontentarchiveconfirm');\n\n            // Button [Archive]\n            var archiveBtnProperty = {\n                name: 'archive',\n                classNames: 'openstudio-archive-yes-btn',\n                events: {\n                    click: function() {\n                        t.redirectPostRequest({\n                            url: $('#contentversionlink').val(),\n                            data: {\n                                archiveversion: 1,\n                            }\n                        });\n                    }\n                }\n            };\n\n            // Button [cancel]\n            var cancelBtnProperty = {\n                name: 'cancel',\n                classNames: 'openstudio-archive-no-btn',\n                action: 'hide'\n            };\n\n            Str\n                .get_strings([\n                    {key: 'contentactionarchivepost', component: 'mod_openstudio'},\n                    {key: 'modulejsdialogcancel', component: 'mod_openstudio'}\n                ])\n                .done(function(s) {\n                    archiveBtnProperty.label = s[0];\n                    cancelBtnProperty.label = s[1];\n\n                    dialogue.addButton(archiveBtnProperty, ['footer']);\n                    dialogue.addButton(cancelBtnProperty, ['footer']);\n                });\n\n            return dialogue;\n        },\n\n        /**\n         * Create delete content dialogue and some events on it.\n         *\n         * @method createDeleteContentDialogue\n         * @param {Element} osDialogue\n         * @return M.core.dialogue\n         */\n        createDeleteContentDialogue: function(osDialogue) {\n            var dialogue = new osDialogue({\n                closeButton: true,\n                visible: false,\n                centered: true,\n                responsive: true,\n                responsiveWidth: 767,\n                modal: true,\n                focusOnPreviousTargetAfterHide: true,\n                width: 521\n            });\n\n            t.setHeader(dialogue, 'deletearchiveversionheader');\n            t.setBody(dialogue, 'deletearchiveversionheaderconfirm');\n\n            // Button [delete]\n            var deleteBtnProperty = {\n                name: 'delete',\n                classNames: 'openstudio-delete-btn',\n                events: {\n                    click: function() {\n                        var delete_item = t.delete_item;\n                        var promises = Ajax.call([{\n                            methodname: 'mod_openstudio_external_delete_version',\n                            args: {\n                                cmid: delete_item.attr('data-cmid'),\n                                cid: delete_item.attr('data-cid'),\n                                cvid: delete_item.attr('data-cvid')\n                            }\n                        }]);\n\n                        promises[0]\n                            .done(function() {\n                                $('.openstudio-cancel-btn').trigger('click');\n\n                                // Redirect to current version content when delete from view version detail.\n                                if ($('#contentcurrenteversionurl').length > 0) {\n                                    window.location.href = $('#contentcurrenteversionurl').val();\n                                } else {\n                                    // Remove from post type list.\n                                    $('#content_version_id_' + delete_item.attr('data-cvid')).remove();\n\n                                    // Check if do not has any post archive we will remove Archive panel.\n                                    if ($('.openstudio-content-view-version-detail').length == 0) {\n                                        $('#openstudio_content_view_post_archive_panel').remove();\n                                    }\n                                }\n                            })\n                            .fail(function(ex) {\n                                window.console.error('Error delete content version' + ex.message);\n                            });\n                    }\n                }\n            };\n\n            // Button [cancel]\n            var cancelBtnProperty = {\n                name: 'cancel',\n                classNames: 'openstudio-cancel-btn',\n                action: 'hide'\n            };\n\n            Str\n                .get_strings([\n                    {key: 'modulejsdialogdelete', component: 'mod_openstudio'},\n                    {key: 'modulejsdialogcancel', component: 'mod_openstudio'}\n                ])\n                .done(function(s) {\n                    deleteBtnProperty.label = s[0];\n                    cancelBtnProperty.label = s[1];\n\n                    dialogue.addButton(deleteBtnProperty, ['footer']);\n                    dialogue.addButton(cancelBtnProperty, ['footer']);\n                });\n\n            return dialogue;\n        },\n\n        /**\n         * Redirect to url with post method.\n         * @method redirectPostRequest\n         * @param {JSON} options Request data\n         */\n        redirectPostRequest: function(options) {\n            var form = $('<form></form>');\n            form.attr({\n                'method': 'POST',\n                'action': options.url,\n                'style': 'display: none;'\n            });\n\n            $.each(options.data, function(key, value) {\n                var field = $('<input/>');\n                field.attr(\"type\", \"hidden\");\n                field.attr(\"name\", key);\n                field.attr(\"value\", value);\n\n                form.append(field);\n            });\n\n            $(form).appendTo('body').submit();\n        },\n\n        /**\n         * Show comment box when clicking on the \"Add comment\" from My module page.\n         *\n         * @method showCommentBox\n         */\n\n        showCommentBox: function() {\n            // Due to the current code still using Bootstrap 4, thus Jquery can work better than Javascript.\n            const urlParams = new URLSearchParams(window.location.search);\n            const idAddComment = $('#id_addcomment');\n\n            if (urlParams.get('addcomment') == 1) {\n                const folderComment = $('#toggle_folder_view_folder_comments');\n                if (folderComment) {\n                    folderComment.click();\n\n                }\n\n                idAddComment.click();\n                if (folderComment) {\n                    $('#openstudio_folder_view_folder_comments').on(\"shown.bs.collapse\", function() {\n                        t.scrollToEle();\n                    });\n                } else {\n                    t.scrollToEle();\n                }\n            }\n        },\n\n        scrollToEle: function() {\n            const element = $('.openstudio-comment-form-body');\n            $('html, body').animate({\n                scrollTop: $(element).offset().top\n            }, 800);\n        },\n        };\n\n    return t;\n\n});\n"],"names":["define","$","Ajax","Str","Modal","ModalEvents","Templates","Config","require","Leaflet","t","dialogue","delete_item","mconfig","init","options","fx","off","Y","use","osDialogue","archiveDialogue","createArchiveDialogue","deleteContentDialogue","createDeleteContentDialogue","createMaximizeModal","on","toogleContentModal","delegate","contentViewMapCanvas","length","showGoogleMap","e","preventDefault","show","this","$spanInactive","$spanActive","bind","doFlagContent","children","focus","doHoverFlagIcon","add","event","key","parent","document","ready","showCommentBox","render","title","text","body","html","date","isiframecontent","find","done","modal","setLarge","isVisible","hide","getRoot","shown","type","scrollIntoView","keydown","keyCode","toggleClass","gpslat","attr","gpslng","myLatLng","lat","parseFloat","lng","map","setView","get_string","string","tileLayer","attribution","addTo","marker","icon","iconUrl","iconSize","call","methodname","args","cmid","cid","fid","mode","res","success","flagcontainer","iscontentflagrequestfeedback","flagtext","removeClass","flagremoveclass","addClass","flagaddclass","accessiblemessage","fail","ex","window","console","error","message","parents","setHeader","label","s","set","setBody","closeButton","visible","centered","responsive","responsiveWidth","focusOnPreviousTargetAfterHide","width","archiveBtnProperty","name","classNames","events","click","redirectPostRequest","url","val","data","archiveversion","cancelBtnProperty","action","get_strings","component","addButton","deleteBtnProperty","cvid","trigger","location","href","remove","form","each","value","field","append","appendTo","submit","urlParams","URLSearchParams","search","idAddComment","get","folderComment","scrollToEle","element","animate","scrollTop","offset","top"],"mappings":"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"}