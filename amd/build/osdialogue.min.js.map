{"version":3,"file":"osdialogue.min.js","sources":["../src/osdialogue.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Extend Moodle dialogue.\n *\n * @package\n * @copyright 2017 The Open University\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * @module mod_openstudio/osdialogue\n */\ndefine([\n    'jquery',\n    'core/yui'\n], function($, Y) {\n    var OSDIALOGUE_NAME = 'Open Studio dialogue',\n        DIALOGUE_PREFIX = 'moodle-dialogue';\n    var t = function() {\n        // Set bouding class for Open Studio dialogue to be distinguishable with other Moodle dialogues.\n        arguments[0].extraClasses = arguments[0].extraClasses || [];\n        arguments[0].extraClasses.push('openstudio-dialogue');\n\n        t.superclass.constructor.apply(this, arguments);\n    };\n\n    Y.use('moodle-core-notification-dialogue', function() {\n        Y.extend(t, M.core.dialogue, {\n            /**\n             * Override addButton function of super class.\n             * @param {object} property\n             * @param {array} sections\n             */\n            addButton: function (property, sections) {\n                var self = this;\n                var button = '<button class=\"' + property.classNames + ' btn\">' + property.label + '</button>';\n                var sectionNode;\n\n                $.each(sections, function (key, value) {\n                    switch (value) {\n                        case 'footer':\n                            sectionNode = self.footerNode;\n                            break;\n                        default:\n                            return;\n                            break;\n                    }\n\n                    sectionNode.append(button);\n\n                    var buttonNode = sectionNode.all('.' + property.classNames);\n                    if (property.action == 'hide') {\n                        buttonNode.on('click', self.hide.bind(self));\n                    }\n\n                    if (property.events) {\n                        $.each(property.events, function (key, value) {\n                            buttonNode.on(key, function () {\n                                value.apply(self, arguments);\n                            });\n                        });\n                    }\n                });\n            }\n        }, {\n            NAME: OSDIALOGUE_NAME,\n            CSS_PREFIX: DIALOGUE_PREFIX\n        });\n    });\n\n    return t;\n});\n"],"names":["define","$","Y","t","arguments","extraClasses","push","superclass","constructor","apply","this","use","extend","M","core","dialogue","addButton","property","sections","sectionNode","self","button","classNames","label","each","key","value","footerNode","append","buttonNode","all","action","on","hide","bind","events","NAME","CSS_PREFIX"],"mappings":";;;;;;;AA0BAA,mCAAO,CACH,SACA,aACD,SAASC,EAAGC,OAGPC,EAAI,SAAJA,IAEAC,UAAU,GAAGC,aAAeD,UAAU,GAAGC,cAAgB,GACzDD,UAAU,GAAGC,aAAaC,KAAK,uBAE/BH,EAAEI,WAAWC,YAAYC,MAAMC,KAAMN,mBAGzCF,EAAES,IAAI,qCAAqC,WACvCT,EAAEU,OAAOT,EAAGU,EAAEC,KAAKC,SAAU,CAMzBC,UAAW,SAAUC,SAAUC,cAGvBC,YAFAC,KAAOV,KACPW,OAAS,kBAAoBJ,SAASK,WAAa,SAAWL,SAASM,MAAQ,YAGnFtB,EAAEuB,KAAKN,UAAU,SAAUO,IAAKC,UAEnB,WADDA,QAEAP,YAAcC,KAAKO,YAOfC,OAAOP,YAEfQ,WAAaV,YAAYW,IAAI,IAAMb,SAASK,YACzB,QAAnBL,SAASc,QACTF,WAAWG,GAAG,QAASZ,KAAKa,KAAKC,KAAKd,OAGtCH,SAASkB,QACTlC,EAAEuB,KAAKP,SAASkB,QAAQ,SAAUV,IAAKC,OACnCG,WAAWG,GAAGP,KAAK,WACfC,MAAMjB,MAAMW,KAAMhB,uBAMvC,CACCgC,KAjDc,uBAkDdC,WAjDc,uBAqDflC"}