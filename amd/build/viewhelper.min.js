define ("mod_openstudio/viewhelper",["jquery","amd/build/isotope.pkgd.min.js"],function(a,b){var c={isotope:[],mconfig:null,CSS:{SEARCHBOX:"#oustudyplan-query"},init:function init(a){c.mconfig=a||{searchtext:""};c.handleFilter();c.handleIsotope();c.handleGroupSwitcher();c.handleViewSizeSwitcher();c.handleBlockSwitcher();c.initSearchForm();c.handleCollapseClick()},handleIsotope:function handleIsotope(){var d=a(".openstudio-grid");d.each(function(){c.isotope.push(new b("#"+this.id,{layoutMode:"masonry",itemSelector:".openstudio-grid-item",masonry:{columnWidth:243,gutter:20,horizontalOrder:!0}}))});a(window).on("load",function(){c.reArrangeItems()})},reArrangeItems:function reArrangeItems(){setTimeout(function(){a.each(c.isotope,function(a,b){b.layout()})},1e3)},handleGroupSwitcher:function handleGroupSwitcher(){a(document).on("change","#filter_groupid",function(){c.redirectURL()})},handleBlockSwitcher:function handleBlockSwitcher(){a(document).on("change","#filter_block_activity",function(){c.redirectURL()})},handleViewSizeSwitcher:function handleViewSizeSwitcher(){a(document).on("change","#filter_pagesize",function(){c.redirectURL()})},redirectURL:function redirectURL(){var b=a("#view_sort_action_url").val(),c=a("#vid").val(),d=a("#groupid");if(0<d.length){var e=d.val();b=b+"&groupid="+e}b=b+"&vid="+c;a(".openstudio-filter-select-box:visible").each(function(){var c=a(this).attr("name");b=b+"&"+c+"="+a(this).val()});window.location.href=b},handleFilter:function handleFilter(){a("#openstudio_filter_types_0").on("click",function(b){var c=a(this);if(!c.is(":checked")){b.preventDefault();return!1}a(".openstudio-filter-types-checkbox").prop("checked",!1);a("#openstudio_filter_types_0").prop("checked",!0)});a(".openstudio-filter-types-checkbox").on("click",function(){var b=a(this);if(b.is(":checked")&&"openstudio_filter_types_0"!=b.attr("id")){a("#openstudio_filter_types_0").prop("checked",!1)}var c=a("[name=\"ftypearray[]\"]:checked").length;if(0==c){a("#openstudio_filter_types_0").prop("checked",!0)}});a("#openstudio_filter_user_flags_0").on("click",function(b){var c=a(this);if(!c.is(":checked")){b.preventDefault();return!1}a(".openstudio-filter-user-flags-checkbox").prop("checked",!1);a("#openstudio_filter_user_flags_0").prop("checked",!0)});a(".openstudio-filter-user-flags-checkbox").on("click",function(){var b=a(this);if(b.is(":checked")&&"openstudio_filter_types_0"!=b.attr("id")){a("#openstudio_filter_user_flags_0").prop("checked",!1)}var c=a("[name=\"fflagarray[]\"]:checked").length;if(0==c){a("#openstudio_filter_user_flags_0").prop("checked",!0)}});a("#reset_filter_btn").on("click",function(){a("#reset_filter").val(1);a("#filteractive").val(0);a("#openstudio-filter-form").submit()});a(".openstudio-filter-block").on("click",function(){var b=a(this),c=a("#filter_area_activity_value").val(),d=a("[name=\"fblockarray[]\"]:checked").length;if(b.is(":checked")){a("#filter_block").val(c)}if(0==d){a("#filter_block").val(0)}});a("#filter_block").on("change",function(){var b=a(this).val(),c=a("#filter_area_activity_value").val();if(parseInt(b)==c){a("#filter_block").val(0)}else{a(".openstudio-filter-block").prop("checked",!1)}});a(".openstudio-filter-link a").on("click",function(){var b=!a(this).hasClass("collapsed");a(a(this).data("target")).find("input, select").attr("tabindex",b?-1:0)});a(".openstudio-filter-link a.collapsed").each(function(){a(a(this).data("target")).find("input, select").attr("tabindex",-1)})},handleCollapseClick:function handleCollapseClick(){for(var a=document.querySelector(".openstudio-profile-mypaticipation-content"),b=document.getElementById("openstudio_profile_fullusername"),c=document.querySelector("#openstudio_profile_bar .openstudio-profile-bar-participation-content"),d=document.querySelector("#openstudio_profile_bar_mobile .openstudio-profile-bar-participation-content"),e=document.getElementsByClassName("openstudio-profile-progress-content"),f=null,g=null,h=document.querySelector("body"),j=0;j<e.length;j++){if(e&&e[j]&&0<e[j].clientHeight){f=e[j]}}if(h.classList.contains("ios")||h.classList.contains("android")){g=d}else{g=c}if(b&&f){var k=f.style.marginTop?f.style.marginTop:"0px",l=f.style.paddingTop?f.style.paddingTop:"0px";b.addEventListener("click",function(){var c=window.innerWidth;if(767<c&&1204>c&&!h.classList.contains("ios")&&!h.classList.contains("android")||767<c&&940>c&&(h.classList.contains("ios")||h.classList.contains("android"))){if(b.classList.contains("collapsed")){setTimeout(function(){if(g&&21<b.clientHeight){if(a&&a.getBoundingClientRect().height>g.getBoundingClientRect().height){if(f.getBoundingClientRect().top>a.getBoundingClientRect().bottom){f.style.marginTop=k+3+"px"}else{f.style.marginTop=a.getBoundingClientRect().bottom-f.getBoundingClientRect().top+"px"}}else if(g){if(f.getBoundingClientRect().top>g.getBoundingClientRect().bottom){f.style.marginTop=k+3+"px"}else{f.style.marginTop=g.getBoundingClientRect().bottom-f.getBoundingClientRect().top+"px"}}if(h.classList.contains("ios")||h.classList.contains("android")){f.style.paddingTop="5px"}else{f.style.paddingTop="9px"}}},500)}else{f.style.paddingTop=l;f.style.marginTop=k}}})}},initSearchForm:function initSearchForm(){a(c.CSS.SEARCHBOX).val(c.mconfig.searchtext)}};return c});
//# sourceMappingURL=viewhelper.min.js.map
