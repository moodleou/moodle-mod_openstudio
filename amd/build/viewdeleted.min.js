/**
 * JavaScript to view deleted contents feature.
 *
 * @package
 * @copyright 2017 The Open University
 * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_openstudio/viewdeleted",["jquery","core/ajax","core/str","mod_openstudio/osdialogue"],(function($,Ajax,Str,osDialogue){var t;return t={mconfig:null,dialogue:null,CSS:{BOUNDINGCLASS:".openstudio-view-deleted-dialogue",VIEW_DELETED_BUTTON:"#id_viewdeletedpostbutton",RESTORE_BUTTON:".openstudio-restore-deleted-button"},init:async function(options){t.mconfig=options,t.dialogue=await t.createDeletedPostDialogue(),$(t.CSS.VIEW_DELETED_BUTTON).on("click",(function(){t.dialogue&&t.dialogue.show()})),$("body").delegate(t.CSS.RESTORE_BUTTON,"click",t.restoreContent)},createDeletedPostDialogue:async function(){const dialogue=await osDialogue.create({isVerticallyCentered:!0,templateContext:{extraClasses:t.CSS.BOUNDINGCLASS.replace(".","")+" openstudio-folder-posts-dialogue"}});return function(dialogue){Str.get_string("folderdeletedposts","mod_openstudio").done((function(s){dialogue.setTitle("<span>"+s+"</span>")}))}(dialogue),function(dialogue){M.util.js_pending("openstudioFetchDeletedContent"),Ajax.call([{methodname:"mod_openstudio_external_fetch_deleted_posts_in_folder",args:{cmid:t.mconfig.cmid,folderid:t.mconfig.folderid}}])[0].done((function(html){dialogue.setBody(html)})).always((function(){M.util.js_complete("openstudioFetchDeletedContent")})).fail((function(ex){window.console.error("Log request failed "+ex.message)}))}(dialogue),dialogue},restoreContent:function(){var cvid=$(this).data("content-version-id");cvid=parseInt(cvid),M.util.js_pending("openstudioRestoreContent"),Ajax.call([{methodname:"mod_openstudio_external_restore_content_in_folder",args:{cmid:t.mconfig.cmid,cvid:cvid,folderid:t.mconfig.folderid}}])[0].done((function(){window.location.reload()})).always((function(){M.util.js_complete("openstudioRestoreContent")})).fail((function(ex){window.console.error("Log request failed "+ex.message)}))}}}));

//# sourceMappingURL=viewdeleted.min.js.map